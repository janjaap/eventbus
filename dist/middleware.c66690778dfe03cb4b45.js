!function(e){if("includes"in Array.prototype)e();else{var r=document.createElement("script");r.src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Array.prototype.includes",r.onload=e,r.onerror=function(){console.error("Could not load polyfills script!"),e()},document.head.appendChild(r)}}(function(){!function(e){function __webpack_require__(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}var r={};__webpack_require__.m=e,__webpack_require__.c=r,__webpack_require__.d=function(e,r,n){__webpack_require__.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/middleware/middleware.js")}({"./src/middleware/manager.js":function(e,r,n){"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,n){return r&&defineProperties(e.prototype,r),n&&defineProperties(e,n),e}}(),i=function(){function Manager(){_classCallCheck(this,Manager),this.middlewareFunctions={}}return t(Manager,[{key:"createClassEntry",value:function(e){!1==={}.propertyIsEnumerable.call(this.middlewareFunctions,e)&&(this.middlewareFunctions[e]=[])}},{key:"createMethodEntry",value:function(e,r){this.middlewareFunctions[e][r]||(this.middlewareFunctions[e][r]=[])}},{key:"use",value:function(e){var r=this,n=e.constructor.name;this.createClassEntry(n);for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return i.forEach(function(t){Manager.getClassMethodNames(t).forEach(function(i){var o=t[i].bind(t);r.createMethodEntry(n,i),r.middlewareFunctions[n][i].unshift(o(e))})}),Object.keys(this.middlewareFunctions[n]).forEach(function(t){var i=e[t];if(!i)throw new Error("[Manager] Target method '"+t+"' does not exist");var o=i.bind(e),a=r.middlewareFunctions[n][t],u=Manager.compose(a)(o);e[t]=u}),this}}],[{key:"getClassMethodNames",value:function(e){var r=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(r).filter(function(e){return"constructor"!==e})}},{key:"compose",value:function(e){var r=e.length;if(0===r)return function(e){return e};if(1===r)return e[0];var n=e.pop();return function(){return e.reduceRight(function(e,r){return r(e)},n.apply(void 0,arguments))}}}]),Manager}();r.default=i},"./src/middleware/message-recorder.js":function(e,r,n){"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,n){return r&&defineProperties(e.prototype,r),n&&defineProperties(e,n),e}}(),i=function(){function MessageRecorder(e){_classCallCheck(this,MessageRecorder),this.messageStore=e}return t(MessageRecorder,[{key:"createTopic",value:function(){var e=this;return function(r){return function(n){var t=r(n);return e.messageStore.createTopic(n),t}}}},{key:"publish",value:function(){var e=this;return function(r){return function(n,t){return e.messageStore.record(n,t),r(n,t)}}}}]),MessageRecorder}();r.default=i},"./src/middleware/middleware.js":function(e,r,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.PublicationPoller=r.MessageRecorder=r.Manager=void 0;var t=n("./src/middleware/manager.js"),i=_interopRequireDefault(t),o=n("./src/middleware/message-recorder.js"),a=_interopRequireDefault(o),u=n("./src/middleware/publication-poller.js"),c=_interopRequireDefault(u);r.Manager=i.default,r.MessageRecorder=a.default,r.PublicationPoller=c.default},"./src/middleware/publication-poller.js":function(e,r,n){"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,n){return r&&defineProperties(e.prototype,r),n&&defineProperties(e,n),e}}(),i=function(){function PublicationPoller(e){var r=this;_classCallCheck(this,PublicationPoller),this.messageStore=e,this.pollPublishedMessages=function(e,n){e.messagesToListenTo.filter(function(e){return r.messageStore.messageIsRecorded(e,n)}).forEach(function(r){e.process(r)})}}return t(PublicationPoller,[{key:"subscribeToOne",value:function(e){var r=this;return function(n){return function(t){var i=n(t);return r.pollPublishedMessages(e,t),i}}}},{key:"subscribeToMany",value:function(e){var r=this;return function(n){return function(t){var i=n(t);return t.forEach(function(n){return r.pollPublishedMessages(e,n)}),i}}}}]),PublicationPoller}();r.default=i}})});