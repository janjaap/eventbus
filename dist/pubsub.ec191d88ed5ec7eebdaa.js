!function(e){if("includes"in Array.prototype)e();else{var t=document.createElement("script");t.src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Array.prototype.includes",t.onload=e,t.onerror=function(){console.error("Could not load polyfills script!"),e()},document.head.appendChild(t)}}(function(){!function(e){function __webpack_require__(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,s){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/pubsub/pubsub.js")}({"./src/pubsub/event-bus.js":function(e,t,s){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}(),i=function(){function EventBus(){_classCallCheck(this,EventBus),this.defaultTopic="__global__",this.topics={},this.topics[this.defaultTopic]=[]}return r(EventBus,[{key:"createTopic",value:function(e){return this.topicIsCreated(e)||(this.topics[e]=[]),e}},{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultTopic;if(!this.topicIsCreated(t))throw new Error("[EventBus] Cannot publish a message in non-existent topic '"+t+"'");var s=this.topics[t];EventBus.notifySubscribers(s,e)}},{key:"subscribe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultTopic;if(!this.topicIsCreated(t))throw new Error("[EventBus] Cannot subscribe "+e+" to non-existent topic '"+t+"'");this.topics[t].push(e)}},{key:"topicIsCreated",value:function(e){return{}.propertyIsEnumerable.call(this.topics,e)}}],[{key:"notifySubscribers",value:function(e,t){e.forEach(function(e){return e.process(t)})}}]),EventBus}();t.default=new i},"./src/pubsub/message-store.js":function(e,t,s){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}(),i=function(){function MessageStore(e){_classCallCheck(this,MessageStore),this.defaultTopic=e.defaultTopic,this.store={},this.store[this.defaultTopic]=[]}return r(MessageStore,[{key:"createTopic",value:function(e){this.topicExists(e)||(this.store[e]=[])}},{key:"record",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultTopic;if(!this.topicExists(t))throw new Error("[MessageStore] Cannot record message in non-existent topic '"+t+"'");this.messageIsRecorded(e,t)||this.store[t].push(e)}},{key:"topicExists",value:function(e){return{}.propertyIsEnumerable.call(this.store,e)}},{key:"messageIsRecorded",value:function(e,t){return this.topicExists(t)&&this.store[t].includes(e)}}]),MessageStore}();t.default=i},"./src/pubsub/publisher.js":function(e,t,s){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}(),i=function(){function Publisher(e,t){if(_classCallCheck(this,Publisher),this.EventBus=t,!this.EventBus.createTopic||!this.EventBus.publish)throw new Error("[Publisher] EventBus object should have 'createTopic' and 'publish' methods");this.topic=this.EventBus.createTopic(e)}return r(Publisher,[{key:"send",value:function(e){this.EventBus.publish(e,this.topic)}}]),Publisher}();t.default=i},"./src/pubsub/pubsub.js":function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageStore=t.Subscriber=t.Publisher=t.EventBus=void 0;var r=s("./src/pubsub/event-bus.js"),i=_interopRequireDefault(r),n=s("./src/pubsub/publisher.js"),u=_interopRequireDefault(n),o=s("./src/pubsub/subscriber.js"),c=_interopRequireDefault(o),a=s("./src/pubsub/message-store.js"),l=_interopRequireDefault(a);t.EventBus=i.default,t.Publisher=u.default,t.Subscriber=c.default,t.MessageStore=l.default},"./src/pubsub/subscriber.js":function(e,t,s){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}(),i=function(){function Subscriber(e,t,s){if(_classCallCheck(this,Subscriber),this.EventBus=s,!this.EventBus.subscribe)throw new Error("[Subscriber] EventBus should have a 'subscribe' method");this.messagesToListenTo=Array.isArray(e)?e:[e],this.callback=t,this.publishedMessages=[],this.needsAllMessagesForCallback=!0}return r(Subscriber,[{key:"requireAllMessages",value:function(e){return this.needsAllMessagesForCallback=e,this}},{key:"setPublished",value:function(e){this.publishedMessages.push(e)}},{key:"isPublished",value:function(e){return this.publishedMessages.includes(e)}},{key:"listensFor",value:function(e){return this.messagesToListenTo.includes(e)}},{key:"subscribeToOne",value:function(e){return this.EventBus.subscribe(this,e),this}},{key:"subscribeToMany",value:function(e){var t=this;return e.forEach(function(e){t.EventBus.subscribe(t,e)}),this}},{key:"process",value:function(e){this.listensFor(e)&&!1===this.isPublished(e)&&(this.setPublished(e),this.needsAllMessagesForCallback?this.allMessagesPublished&&this.callback(e):this.callback(e))}},{key:"allMessagesPublished",get:function(){var e=this;return this.messagesToListenTo.every(function(t){return e.isPublished(t)})}}]),Subscriber}();t.default=i}})});